@model JobSystem.Mvc.ViewModels.Consignments.ConsignmentPendingListViewModel

@{
    ViewBag.Title = "Consignments";
}

<div id="toggle-container">
	<span class="toggle toggle-active toggle-left"><a href="@Url.Action("PendingConsignments")">Pending</a></span>
	<span class="toggle toggle-right"><a href="@Url.Action("ActiveConsignments")">Consigned</a></span>
</div>

@using (Html.BeginForm("ConsignPending", "Consignment", FormMethod.Post))
{

	if (Model.ConsignmentItems.Any())
	{
		<input class="primary-action" type="submit" value="Consign"/>
		<table>
			<tr>
				<th class="narrowHeader"></th>
				<th>Job Item Ref.</th>
				<th>Supplier Name</th>
				<th>Instructions</th>
				<th></th>
			</tr>
		@foreach (var item in Model.ConsignmentItems.OrderBy(i => i.JobItemRef))
		 {
			<tr>
				<td><input type="checkbox" name="ToBeConvertedIds" value="@item.Id"/></td>
				<td>@item.JobItemRef</td>
				<td>@item.SupplierName</td>
				<td>@item.Instructions</td>
				<td>@Html.ActionLink("Edit", "EditItem", new { id = item.Id })</td>
			</tr>
		 }
		</table>
	}
	else
	{
		<div id="empty-list">@JobSystem.Resources.JobItems.Messages.NoConsignments</div>
	}
}

<div id="edit-consignment-container">
</div>

<input type="hidden" id="editConsignmentItemUrl" value="@Url.Action("Edit", "Consignment")"/>